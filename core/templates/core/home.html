{% extends 'core/base.html' %}
{% load static %}

{% block content %}
<!-- Live Stream Banner -->
{% if settings.is_live_now %}
<a href="{{ settings.live_stream_url }}" target="_blank" style="display: block; background: #e53935; color: white; text-align: center; padding: 0.75rem; text-decoration: none; font-weight: 600; font-size: 0.9rem; letter-spacing: 0.05em;">
    <span class="material-icons-round" style="vertical-align: middle; font-size: 18px; margin-right: 0.5rem;">live_tv</span>
    WE ARE LIVE NOW - JOIN THE SERVICE &rarr;
</a>
{% endif %}

<!-- Hero Section -->
<section class="hero text-center fade-in" style="padding: 3rem 1.5rem;">
    <div style="margin-bottom: 1.5rem; opacity: 0.8;">
        <span class="material-icons-round" style="font-size: 48px; color: var(--accent);">church</span>
    </div>
    <h2 style="font-family: var(--font-heading); font-size: 2.5rem; line-height: 1.2; color: #1a1d21; margin-bottom: 0.75rem;">
        Ye shall know the truth
    </h2>
    <p style="font-family: var(--font-heading); font-style: italic; font-size: 1.125rem; color: var(--text-secondary); margin-bottom: 2.5rem; max-width: 300px; margin-left: auto; margin-right: auto;">
        And the truth shall make you free.
    </p>
    <a href="{% url 'sermon_list' %}" class="btn-primary" style="display: block; width: 100%; max-width: 320px; margin: 0 auto; padding: 1rem; text-transform: uppercase; font-size: 0.875rem; letter-spacing: 0.05em; border-radius: 4px; text-decoration: none;">
        Watch Latest Sermon
    </a>
</section>

</section>

<!-- Scroll Nav -->
<section class="mobile-only-section" style="margin-bottom: 2.5rem; border-bottom: 1px solid var(--border-color);">
    <div class="no-scrollbar" style="display: flex; overflow-x: auto; padding: 0 1.5rem; gap: 2rem;">
        <a href="{% url 'home' %}" style="padding-bottom: 0.75rem; font-size: 0.875rem; font-weight: 600; color: var(--accent); border-bottom: 2px solid var(--accent); white-space: nowrap;">Home</a>
        <a href="{% url 'sermon_list' %}" style="padding-bottom: 0.75rem; font-size: 0.875rem; font-weight: 500; color: var(--text-secondary); white-space: nowrap;">Sermons</a>
        <a href="{% url 'event_list' %}" style="padding-bottom: 0.75rem; font-size: 0.875rem; font-weight: 500; color: var(--text-secondary); white-space: nowrap;">Events</a>
        <a href="{% url 'give' %}" style="padding-bottom: 0.75rem; font-size: 0.875rem; font-weight: 500; color: var(--text-secondary); white-space: nowrap;">Give</a>
        <a href="{% url 'prayer_request' %}" style="padding-bottom: 0.75rem; font-size: 0.875rem; font-weight: 500; color: var(--text-secondary); white-space: nowrap;">Prayer</a>
    </div>
</section>

<!-- Featured Topics (Cards) -->
<!-- Topic Cards (Mobile) -->
<section class="container mobile-only-section" style="padding: 0 1.5rem; display: flex; flex-direction: column; gap: 1rem; margin-bottom: 2rem;">
    {% for cat in categories %}
    <div class="topic-card">
        <h3>{{ cat.name }}</h3>
        <!-- Description would be nice if Topic has it, assuming blank otherwise -->
        <p>Explore biblical teachings on {{ cat.name|lower }}.</p>
        <a href="{% url 'sermon_list' %}?topic={{ cat.slug }}" class="read-more">Read <span class="material-icons-round" style="font-size: 14px;">arrow_forward</span></a>
    </div>
    {% endfor %}
</section>

<!-- Testimonies Section -->
<section style="margin: 3rem 1.5rem 2.5rem;">
    <div style="display: flex; justify-content: space-between; align-items: baseline; margin-bottom: 1.5rem;">
        <h3 style="font-family: var(--font-heading); font-size: 1.5rem; color: var(--text-primary); margin: 0;">Testimonies</h3>
        <a href="{% url 'submit_testimony' %}" style="font-size: 0.85rem; color: var(--accent); text-decoration: none; font-weight: 500;">Share Yours &rarr;</a>
    </div>

    {% if testimonies %}
        <div style="display: flex; overflow-x: auto; gap: 1rem; padding-bottom: 1rem; scroll-snap-type: x mandatory; -webkit-overflow-scrolling: touch;">
            {% for testimony in testimonies %}
            <a href="{% url 'testimony_detail' testimony.pk %}" style="display: flex; flex-direction: column; text-decoration: none; color: inherit; flex: 0 0 280px; scroll-snap-align: start; background: #fff; padding: 1.5rem; border: 1px solid var(--border-color); border-radius: 4px; transition: transform 0.2s, box-shadow 0.2s;">
                <p style="font-size: 0.95rem; color: var(--text-secondary); margin-bottom: 1rem; line-height: 1.5; flex-grow: 1;">"{{ testimony.content|truncatewords:20 }}"</p>
                <div>
                    <strong style="display: block; font-size: 0.9rem; color: var(--text-primary);">{{ testimony.name|default:"Anonymous" }}</strong>
                    {% if testimony.location %}
                    <span style="font-size: 0.8rem; color: var(--text-secondary);">{{ testimony.location }}</span>
                    {% endif %}
                </div>
            </a>
            {% endfor %}
        </div>
    {% else %}
        <div style="background: #f4f6f7; padding: 2rem; border-radius: 8px; text-align: center;">
            <p style="margin-bottom: 1rem; color: var(--text-secondary);">God is moving in our midst. Use your story to encourage others.</p>
            <a href="{% url 'submit_testimony' %}" class="btn-primary" style="display: inline-block; padding: 0.5rem 1rem; border-radius: 4px; text-decoration: none; font-size: 0.9rem;">Share Your Testimony</a>
        </div>
    {% endif %}
</section>

<style>
/* Local Styles for Home */
.topic-card {
    background: #ffffff;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    color: white;
}

.sermon-card-mobile {
    background: #fff;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 1.5rem;
    box-shadow: 0 1px 2px rgba(0,0,0,0.02);
}

.category-tag {
    background: #e0f2f1; /* Light teal bg */
    color: #00695c; /* Teal text */
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    font-size: 0.7rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.action-bar {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-top: 1rem;
    padding-top: 1rem;
    border-top: 1px solid #f0f0f0;
}

.action-link {
    font-size: 0.75rem;
    text-transform: uppercase;
    font-weight: 600;
    color: var(--text-light); /* Muted */
    text-decoration: none;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}
.action-link:hover { color: var(--primary); }

.divider { color: #e0e0e0; font-size: 0.75rem; }

.btn-outline {
    background: transparent;
    border: 1px solid var(--border-color);
    color: var(--text-main);
    padding: 0.75rem;
    text-transform: uppercase;
    font-size: 0.75rem;
    letter-spacing: 0.05em;
    font-weight: 600;
    border-radius: 4px;
    cursor: pointer;
}
</style>
{% endblock %}
