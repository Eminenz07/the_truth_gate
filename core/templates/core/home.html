{% extends 'core/base.html' %}
{% load static %}

{% block content %}
<!-- Hero Section -->
<section class="hero text-center" style="padding: 6rem 0; background: var(--bg-color);">
    <div class="container">
        <h1 style="font-size: 3.5rem; margin-bottom: 1.5rem; letter-spacing: -0.02em;">The Truth Shall make you Free</h1>
        <p style="font-size: 1.25rem; color: var(--text-secondary); margin-bottom: 3rem;">We are a bible believing church, we believe in the death and resurrection of Christ.</p>
        <a href="{% url 'sermon_list' %}" class="btn btn-hero" style="background: var(--text-primary); color: white; padding: 1rem 2.5rem; font-size: 1rem; border: none;">Watch Latest Sermon</a>
    </div>
</section>

<!-- Sermon Previews -->
<section class="latest-sermons" style="padding: 5rem 0; border-top: 1px solid var(--border-color);">
    <div class="container">
        <div style="display: flex; justify-content: space-between; align-items: baseline; margin-bottom: 3rem;">
            <h2 style="font-size: 2rem; margin: 0;">Latest Messages</h2>
            <a href="{% url 'sermon_list' %}" class="action-link">View All</a>
        </div>

        <div class="sermon-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 2rem;">
            <!-- We need to fetch these in the view, currently view passes 'categories'. 
                 Ideally, we'd update views.py to pass 'latest_sermons'. 
                 For now, if categories exist, we loop them, BUT the requirement is 'Sermon Previews'.
                 I will assume the backend has been updated or I need to update it. 
                 Wait, I didn't update core/views.py yet. I should do that.
                 For this safe step, I will use valid Django template logic to avoid errors if context is missing.
            -->
            {% for category in categories|slice:":3" %} 
                <!-- Fallback: Showing categories as 'Featured Topics' if sermons aren't passed yet.
                     Wait, the user wants 'Sermon Previews'. I must update core/views.py first to pass 'latest_sermons'.
                     I will write this template assuming 'latest_sermons' is available.
                -->
                {% for sermon in category.sermons.all|slice:":1" %}
                <div class="sermon-card-modern" style="border: 1px solid var(--border-color); padding: 2rem; border-radius: 4px;">
                     <div class="mb-1">
                        <span style="font-size: 0.75rem; text-transform: uppercase; color: var(--accent); font-weight: 600;">
                            {{ category.name }}
                        </span>
                    </div>
                    <h3 style="font-size: 1.5rem; margin-bottom: 0.75rem;">
                        <a href="{% url 'sermon_detail' category.slug sermon.slug %}" style="text-decoration: none;">{{ sermon.title }}</a>
                    </h3>
                    <p style="margin-bottom: 1.5rem; font-size: 0.95rem;">{{ sermon.description|truncatewords:20 }}</p>
                    <a href="{% url 'sermon_detail' category.slug sermon.slug %}" class="action-link">Watch Now</a>
                </div>
                {% endfor %}
            {% endfor %}
        </div>
    </div>
</section>

<!-- Events Preview -->
<section class="events-preview" style="padding: 5rem 0; background: #ffffff;">
    <div class="container text-center">
        <h2 style="margin-bottom: 1rem;">Upcoming Events</h2>
        <p class="text-secondary mb-4">Gather with us in person.</p>
        
        <!-- Placeholder for Events Loop if available in context, else link -->
        <a href="{% url 'event_list' %}" class="btn" style="margin-top: 1rem;">View Calendar</a>
    </div>
</section>

<!-- Giving CTA -->
<section class="giving-cta" style="padding: 6rem 0; background: var(--bg-color); border-top: 1px solid var(--border-color);">
    <div class="container text-center" style="max-width: 600px;">
        <h2 style="margin-bottom: 1.5rem;">Partner with the Ministry</h2>
        <p class="text-secondary mb-4">Your generosity helps us share the truth with more people around the world.</p>
        <a href="{% url 'give' %}" class="btn" style="border-color: var(--accent); color: var(--accent);">Give Online</a>
    </div>
</section>

<style>
/* Shared styles from sermon list */
.action-link {
    font-size: 0.85rem; text-transform: uppercase; letter-spacing: 0.05em; font-weight: 600; color: var(--accent);
    border-bottom: 1px solid transparent;
}
.action-link:hover { border-bottom-color: var(--accent); }
</style>
{% endblock %}
